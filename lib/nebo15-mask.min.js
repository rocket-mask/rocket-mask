!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Nebo15Mask",[],t):"object"==typeof exports?exports.Nebo15Mask=t():e.Nebo15Mask=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MaskedInput=void 0;var r=n(1),i=o(r),s=n(3),a=o(s);t["default"]=i["default"];t.MaskedInput=a["default"]},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(2),s=function(){function e(t,n){o(this,e),this._name="nebo15-mask",this._mask=e.parseMask(t),this._states=[],this._stateIdx=-1,this._placeholder=n}return r(e,[{key:"_modelGetter",value:function(){return e.parse(this.value,this.mask)}},{key:"_modelSetter",value:function(t){this.viewValue=this._placeholder?e.formatWithPlaceholder(t,this.mask,this._placeholder):e.format(t,this.mask)}},{key:"_getModelPosition",value:function(e){return this.mask.slice(0,e).reduce(function(e,t){return e+=!(t instanceof i.MaskPlaceStatic)},0)}},{key:"_getMaskPosition",value:function(e){return this.mask.reduce(function(t,n){return e===-1?t:n instanceof i.MaskPlaceStatic?t+1:(e--,t+1)},-1)}},{key:"_getCursorPosition",value:function(e){var t=!1;return this.mask.reduce(function(n,o,r){return t?n:o instanceof i.MaskPlaceStatic?n+1:e===-1?(t=!0,n):(e--,n+1)},0)}},{key:"add",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,o=this._getModelPosition(n),r=this.model,i=this.__modelSize-r.length,s=t.split("").map(function(t,n){var r=e.mask[e._getMaskPosition(o+n)];return r.test(t)?t:""}).join("").slice(0,i);if(0===s.length)return n;var a=r.slice(0,o)+s+r.slice(o);this.model=a,this.saveState(a);var u=this._getCursorPosition(o+(s.length-1)),l=this._getCursorPosition(a.length-1);return u>l?l:u}},{key:"remove",value:function(e,t){var n=this.model;if(t<e)return e;var o=this._getModelPosition(e),r=this._getModelPosition(t),i=n.slice(0,o)+n.slice(r);return this.model=i,this.saveState(i),e}},{key:"backspace",value:function(e){if(0===e)return e;var t=this._getModelPosition(e);return 0===t?e:this.remove(this._getCursorPosition(t-2),e)}},{key:"forwardDelete",value:function(e){if(e===this.mask.length)return e;var t=this._getModelPosition(e);return this.remove(e,this._getCursorPosition(t))}},{key:"undo",value:function(e){if(this._stateIdx===-1)return e;this._stateIdx-=1,this.model=this._states[this._stateIdx];var t=this._getCursorPosition(this.model.length-1);return Math.min(e,t)}},{key:"redo",value:function(e){var t=this._states[this._stateIdx+1];if(!t)return e;this._stateIdx++,this.model=t;var n=this._getCursorPosition(this.model.length-1);return Math.min(e,n)}},{key:"saveState",value:function(e){this._states=this._states.slice(0,this._stateIdx+1),this._states.push(e),this._stateIdx=this._states.length-1}},{key:"viewValue",get:function(){throw new Error("get view value must me overrited")},set:function(e){throw new Error("get view value must me overrited")}},{key:"value",get:function(){return this.viewValue},set:function(t){this.model=e.parse(t,this.mask)}},{key:"model",get:function(){return this._modelGetter()},set:function(e){this._modelSetter(e)}},{key:"__modelSize",get:function(){return this.mask.reduce(function(e,t){return e+=!(t instanceof i.MaskPlaceStatic)},0)}},{key:"name",get:function(){return this._name}},{key:"mask",get:function(){return this._mask}}]),e}();t["default"]=s,s.maskedOptions={1:/\d/,w:/[a-zA-Z]/},s.parseMask=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).split("").map(function(e,t){return i.MaskPlace.create(s.maskedOptions[e]||e,t)})},s.format=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e=e||"","undefined"==typeof t[0]?"":t[0]instanceof i.MaskPlaceStatic?t[0].pattern+s.format(e,t.slice(1)):t[0].test(e[0])?(e[0]||"")+s.format(e.slice(1),t.slice(1)):""},s.formatWithPlaceholder=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_",o=s.format(e,t);return t.slice(o.length).reduce(function(e,t){return e+(t instanceof i.MaskPlaceStatic?t.pattern:String(n)[0])},o)},s.parse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e=e||"","undefined"==typeof t[0]?"":t[0]instanceof i.MaskPlaceStatic?t[0].test(e[0])?s.parse(e.slice(1),t.slice(1)):"":t[0].test(e[0])?e[0]+s.parse(e.slice(1),t.slice(1)):""},e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=t.MaskPlace=function(){function e(t,n){r(this,e),this.pattern=t,this.idx=n}return i(e,[{key:"test",value:function(){throw Error("method test must be overrided")}},{key:"placeholder",get:function(){return"_"}}]),e}(),a=t.MaskPlaceRegexp=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"test",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.pattern.test(e)}}]),t}(s),u=t.MaskPlaceStatic=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"test",value:function(e){return this.pattern===e}},{key:"placeholder",get:function(){return this.pattern}}]),t}(s),l=t.MaskPlaceFunction=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"test",value:function(e){return this.pattern(e)}}]),t}(s);s.create=function(e,t){if("undefined"==typeof e||null===e)throw new Error("undefined test char");return e instanceof RegExp?new a(e,t):"function"==typeof e?new l(e,t):new u(e,t)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return(e.ctrlKey||e.metaKey)&&e.keyCode===(e.shiftKey?f.Y:f.Z)}function u(e){return(e.ctrlKey||e.metaKey)&&e.keyCode===(e.shiftKey?f.Z:f.Y)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(1),h=o(c),f={Z:90,Y:89,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pauseBreak:19,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,"delete":46},d=function(e){return(e.clipboardData||window.clipboardData).getData("Text")},p=function(e){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),o=Object.assign({placeholder:null,showOnFocus:!1,hideOnBlur:!1,showAlways:!1},o);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,o.placeholder));return s.options=o,s._element=e,s.onChange=s.onChange.bind(s),s.onKeydown=s.onKeydown.bind(s),s.onPaste=s.onPaste.bind(s),s.onCut=s.onCut.bind(s),s._element.addEventListener("change",s.onChange),s._element.addEventListener("keydown",s.onKeydown),s._element.addEventListener("paste",s.onPaste),s._element.addEventListener("cut",s.onCut),s.onFocus=s.onFocus.bind(s),s.onBlur=s.onBlur.bind(s),s._element.addEventListener("focus",s.onFocus),s._element.addEventListener("blur",s.onBlur),o.showAlways&&(s.model=s.model||""),s}return s(t,e),l(t,[{key:"onChange",value:function(e){var t=e.target.value;this.model=t}},{key:"onKeydown",value:function(e){e=e||window.event;var t=e.keyCode||e.which;if(a(e))return e.preventDefault(),this.cursor=this.undo(this.cursor),null;if(u(e))return e.preventDefault(),this.cursor=this.redo(this.cursor),null;if(0===t)return e.preventDefault();if(e.ctrlKey||e.altKey||e.metaKey||t<46&&[f.backspace,f.space].indexOf(t)===-1)return null;e.preventDefault();var n=this.selection;t===f.backspace?this.cursor=n.start===n.end?this.backspace(n.start):this.remove(n.start,n.end):t===f["delete"]?this.cursor=n.start===n.end?this.forwardDelete(n.start):this.remove(n.start,n.end):(n.start!==n.end&&this.remove(n.start,n.end),this.cursor=this.add(String.fromCharCode(t),n.start))}},{key:"onPaste",value:function(e){e.stopPropagation(),e.preventDefault();var t=d(e),n=this.selection;n.start!==n.end&&this.remove(n.start,n.end),this.cursor=this.add(t,n.start)}},{key:"onCut",value:function(e){var t=this,n=this.selection,o=this.value;setTimeout(function(){t.value=o,t.cursor=t.remove(n.start,n.end)})}},{key:"onFocus",value:function(e){var t=this;this.options.showOnFocus&&(e.preventDefault(),this.model=this.model||"",setTimeout(function(){t.cursor=t._getCursorPosition(t.model.length-1)},0))}},{key:"onBlur",value:function(e){!this.options.showAlways&&this.options.hideOnBlur&&0===this.model.length&&(this.viewValue="")}},{key:"viewValue",get:function(){return this._element.value},set:function(e){this._element.value=e}},{key:"model",get:function(){return this._modelGetter()},set:function(e){this._modelSetter(e),this.options.onModelChange&&this.options.onModelChange(e)}},{key:"cursor",get:function(){return this.selection.start},set:function(e){this.selection={start:e,end:e}}},{key:"selection",get:function(){var e,t,n,o;if(void 0!==this._element.selectionStart)e=this._element.selectionStart,t=this._element.selectionEnd;else try{this._element.focus(),n=this._element.createTextRange(),o=n.duplicate(),n.moveToBookmark(document.selection.createRange().getBookmark()),o.setEndPoint("EndToStart",n),e=o.text.length,t=e+n.text.length}catch(r){}return{start:e,end:t}},set:function(e){var t;try{void 0!==this._element.selectionStart?(this._element.focus(),this._element.setSelectionRange(e.start,e.end)):(this._element.focus(),t=this._element.createTextRange(),t.collapse(!0),t.moveStart("character",e.start),t.moveEnd("character",e.end-e.start),t.select())}catch(n){console.log("catched on set selection")}}}]),t}(h["default"]);t["default"]=p,e.exports=t["default"]}])});
//# sourceMappingURL=nebo15-mask.min.js.map